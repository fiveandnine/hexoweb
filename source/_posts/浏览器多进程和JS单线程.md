---
title: 浏览器多进程和JS单线程
date: 2020-06-13 14:45:12
tags:
  - browser
---
# 浏览器多进程和JS单线程
## 浏览器进程
浏览器是多进程的
  - browser进程
    - 主进程，调度浏览器界面和交互
    - 负责个页面的管理和销毁其他进程
    - 将render进程中得到的bitmap（内存中）绘制到用户界面上
    - 网络资源管理，下载
  - 第三方插件进程
  - gpu进程，用于3D
  - 浏览器渲染进程，浏览器内核renderer进程，内部是多线程的
    - 页面渲染，脚本执行，事件处理
    
## 渲染进程
 - gui线程
    - 负责解析html css，构建dom数和renderobject树，布局和绘制等
    - 重绘和回流都会执行
    - 和js引擎线程互斥，当js引擎执行时，此线程会被挂起，直到js执行完成
 - js线程
    - 执行和解析js代码
 - 事件触发线程
    - 归属于浏览器而不是js
    - 当JS引擎执行代码块如setTimeOut时（也可来自浏览器内核的其他线程,如鼠标点击、AJAX异步请求等），会将对应任务添加到事件线程中
    - 注意，由于JS的单线程关系，所以这些待处理队列中的事件都得排队等待JS引擎处理（当JS引擎空闲时才会去执行）
 - 定时触发器线程
   - settimeout和setInterval
 - http线程
   - 将检测到状态变更时，如果设置有回调函数，异步线程就产生状态变更事件，将这个回调再放入事件队列中。再由JavaScript引擎执行。
 
 chrome中每个tab页都是一个单独的进程（呈现引擎，rendering engine）
 [浏览器主要进程线程](https://images0.cnblogs
 .com/blog/36987/201401/091651061607
 .png)




[](https://juejin.im/post/5a6547d0f265da3e283a1df7)
